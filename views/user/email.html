{% extends "../base.html" %}
{% block content %}

<h2>Change Email</h2>

<form action="" method="post">
    {% raw xsrf_form_html() %}

    {% if errors.get('match') %}
        <p class="error">Invalid current password. Please try again.</p>
    {% end %}
    {% if errors.get('exists') %}
        <p class="error">That email address is already in use.</p>
    {% end %}

    <p>
        <label for="password">Current Password</label>
        <input type="password" name="password" id="password" required autofocus />
        {% if errors.get('password') %}
            <span class="error">Please enter a valid password.</span>
        {% end %}
    </p>

    <p>
        <label for="email">Email</label>
        <input type="email" name="email" id="email" required value="{{form.get('email', current_user.email)}}" />
        {% if errors.get('email') %}
            <span class="error">Please enter a valid email.</span>
        {% end %}
    </p>

    <p><input type="submit" value="Change Email" /></p>
</form>

{% end %}
